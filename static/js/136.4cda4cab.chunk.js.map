{"version":3,"file":"static/js/136.4cda4cab.chunk.js","mappings":"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","sources":["images/placeholder-poster.svg","webpack://goit-react-hw-05-movies/./src/pages/MovieDetails/movie-details.module.scss?cb87","pages/MovieDetails/MovieDetails.jsx","services/api.js"],"sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPlaceholderPoster(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"glyphicons-basic\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 32 32\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#b5b5b5\",\n    id: \"picture\",\n    d: \"M27.5,5H4.5A1.50008,1.50008,0,0,0,3,6.5v19A1.50008,1.50008,0,0,0,4.5,27h23A1.50008,1.50008,0,0,0,29,25.5V6.5A1.50008,1.50008,0,0,0,27.5,5ZM26,18.5l-4.79425-5.2301a.99383.99383,0,0,0-1.44428-.03137l-5.34741,5.34741L19.82812,24H17l-4.79291-4.793a1.00022,1.00022,0,0,0-1.41418,0L6,24V8H26Zm-17.9-6a2.4,2.4,0,1,1,2.4,2.4A2.40005,2.40005,0,0,1,8.1,12.5Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPlaceholderPoster);\nexport default __webpack_public_path__ + \"static/media/placeholder-poster.f9db13c5f6963815666d104105243935.svg\";\nexport { ForwardRef as ReactComponent };","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"movie-details_content__jnH2Q\",\"wrapper\":\"movie-details_wrapper__m5oVT\",\"poster\":\"movie-details_poster__ZwR-7\",\"auxNav\":\"movie-details_auxNav__LaG46\",\"auxNavItem\":\"movie-details_auxNavItem__TfclP\",\"linkBack\":\"movie-details_linkBack__HcrDE\"};","import { Suspense, useState, useEffect } from 'react';\nimport {\n  Outlet,\n  useParams,\n  Link,\n  NavLink,\n  useLocation,\n  useNavigate,\n} from 'react-router-dom';\nimport api from 'services/api';\nimport css from './movie-details.module.scss';\nimport posterPlaceholder from 'images/placeholder-poster.svg';\nimport { FaArrowLeft } from 'react-icons/fa';\n\nconst MovieDetails = () => {\n  const location = useLocation();\n\n  // Запам'ятаємо посилання \"назад\" так, щом воно не змінювалось.\n  // Або для Cast і Review треба fromHref передати в state={{from:fromHref}}\n  const [fromHref] = useState(() => location?.state?.from ?? '/');\n\n  const { movieId } = useParams();\n  const [details, setDetails] = useState();\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    api\n      .getMovieDetails({ movieId })\n      .then(({ data }) => setDetails(data))\n      .catch(error => setError(error?.data?.message ?? error.message));\n  }, [movieId]);\n\n  useEffect(() => {\n    if (!error) {\n      return;\n    }\n    const timeoutId = setTimeout(() => navigate(fromHref), 2000);\n    return () => clearTimeout(timeoutId);\n  }, [error, fromHref, navigate]);\n\n  if (error) {\n    return (\n      <>\n        <p>{error}</p>\n        <p>Redirecting...</p>\n      </>\n    );\n  }\n\n  if (!details) {\n    return <p>Loading content...</p>;\n  }\n\n  const { title, vote_average, release_date, overview, poster_path, genres } =\n    details;\n  const score = Math.round(Number(vote_average) * 10);\n  const genreList = genres ? genres.map(({ name }) => name).join(', ') : '';\n  return (\n    <main className={css.content}>\n      <Link to={fromHref} className={css.linkBack}>\n        <FaArrowLeft /> Back to movies list\n      </Link>\n      <div className={css.wrapper}>\n        <img\n          className={css.poster}\n          src={api.getPosterUrl({\n            path: poster_path,\n            placeholder: posterPlaceholder,\n          })}\n          width={300}\n          alt={title}\n        />\n        <div className={css.details}>\n          <h2>{`${title} (${new Date(release_date).getFullYear()})`}</h2>\n          <p>User score: {score}%</p>\n          <h3>Overview</h3>\n          <p>{overview}</p>\n          <h3>Genres</h3>\n          <p>{genreList}</p>\n        </div>\n      </div>\n      <hr />\n      <h3>Additional information</h3>\n      <div className={css.auxNav}>\n        <NavLink className={css.auxNavItem} to=\"cast\">\n          Cast\n        </NavLink>\n        <NavLink className={css.auxNavItem} to=\"reviews\">\n          Reviews\n        </NavLink>\n      </div>\n      <Suspense fallback={<div>Loading subpage...</div>}>\n        <Outlet />\n      </Suspense>\n    </main>\n  );\n};\n\nexport default MovieDetails;\n","import axios from 'axios';\n\nconst API_KEY = '06ae09073235b2b05f047c5928d7f44e';\n\nconst instance = axios.create({\n  baseURL: 'https://api.themoviedb.org/3',\n  params: {\n    api_key: API_KEY,\n  },\n});\n\nconst MEDIA_TYPE = {\n  all: 'all',\n  movie: 'movie',\n  tv: 'tv',\n  person: 'person',\n};\n\nconst TIME_WINDOW = {\n  day: 'day',\n  week: 'week',\n};\n\nconst getTrending = ({\n  page = 1,\n  mediaType = MEDIA_TYPE.movie,\n  timeWindow = TIME_WINDOW.week,\n} = {}) => {\n  return instance.get(`/trending/${mediaType}/${timeWindow}`, {\n    params: { page },\n  });\n};\n\nconst getMovies = ({ page = 1, query }) => {\n  return instance.get('/search/movie', { params: { page, query } });\n};\n\nconst getMovieDetails = ({ movieId }) => {\n  return instance.get(`/movie/${movieId}`).catch(error => {\n    if ((error.response.status = 404)) {\n      throw Error(`Sorry. There is no movie with id ${movieId}.`);\n    }\n\n    throw error;\n  });\n};\n\nconst getMovieCredits = ({ movieId }) => {\n  return instance.get(`/movie/${movieId}/credits`);\n};\n\nconst getMovieReviews = ({ movieId }) => {\n  return instance.get(`/movie/${movieId}/reviews`);\n};\n\nconst getPosterUrl = ({ path, size = 300, placeholder }) =>\n  path ? `https://image.tmdb.org/t/p/w${size}${path}` : placeholder;\n\nconst api = {\n  MEDIA_TYPE,\n  TIME_WINDOW,\n  getTrending,\n  getMovies,\n  getMovieDetails,\n  getMovieCredits,\n  getMovieReviews,\n  getPosterUrl,\n};\n\nexport default api;\n"],"names":["location","useLocation","useState","state","from","fromHref","movieId","useParams","details","setDetails","error","setError","navigate","useNavigate","useEffect","api","then","data","catch","message","timeoutId","setTimeout","clearTimeout","title","vote_average","release_date","overview","poster_path","genres","score","Math","round","Number","genreList","map","name","join","className","css","to","src","path","placeholder","posterPlaceholder","width","alt","Date","getFullYear","Suspense","fallback","instance","axios","baseURL","params","api_key","MEDIA_TYPE","all","movie","tv","person","TIME_WINDOW","day","week","getTrending","page","mediaType","timeWindow","get","getMovies","query","getMovieDetails","response","status","Error","getMovieCredits","getMovieReviews","getPosterUrl","size"],"sourceRoot":""}